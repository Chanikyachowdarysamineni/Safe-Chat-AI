{"ast":null,"code":"var _jsxFileName = \"D:\\\\documents\\\\Desktop\\\\safe- chat-AI\\\\frontend\\\\src\\\\pages\\\\Messages.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { messagesAPI, usersAPI } from '../services/api';\nimport { useSocket } from '../services/SocketContext';\nimport { useAuth } from '../services/AuthContext';\nimport { ChatBubbleLeftRightIcon, MagnifyingGlassIcon, FunnelIcon, ExclamationTriangleIcon, EyeSlashIcon, TrashIcon, ArrowPathIcon, PaperAirplaneIcon, FaceSmileIcon, ShieldExclamationIcon, UserGroupIcon, UserIcon, PlusIcon } from '@heroicons/react/24/outline';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Messages = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const {\n    socket,\n    connected,\n    realTimeData\n  } = useSocket();\n  const [messages, setMessages] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [usersLoading, setUsersLoading] = useState(false);\n  const [sending, setSending] = useState(false);\n  const [newMessage, setNewMessage] = useState('');\n  const [selectedChatroom, setSelectedChatroom] = useState('general');\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [chatType, setChatType] = useState('public'); // 'public' or 'private'\n  const [showUserList, setShowUserList] = useState(false);\n  const [filters, setFilters] = useState({\n    search: '',\n    emotion: '',\n    flagged: '',\n    abuse_type: '',\n    userId: ''\n  });\n  const [pagination, setPagination] = useState({\n    page: 1,\n    limit: 50,\n    total: 0,\n    pages: 1\n  });\n  const [showFilters, setShowFilters] = useState(false);\n  const messagesEndRef = useRef(null);\n  const chatContainerRef = useRef(null);\n  const chatrooms = [{\n    id: 'general',\n    name: 'General',\n    color: 'bg-blue-100 text-blue-800'\n  }, {\n    id: 'support',\n    name: 'Support',\n    color: 'bg-green-100 text-green-800'\n  }, {\n    id: 'feedback',\n    name: 'Feedback',\n    color: 'bg-purple-100 text-purple-800'\n  }, {\n    id: 'announcements',\n    name: 'Announcements',\n    color: 'bg-yellow-100 text-yellow-800'\n  }];\n  const emotions = [{\n    value: '',\n    label: 'All Emotions'\n  }, {\n    value: 'neutral',\n    label: 'Neutral',\n    color: 'text-gray-600'\n  }, {\n    value: 'joy',\n    label: 'Joy',\n    color: 'text-yellow-600'\n  }, {\n    value: 'anger',\n    label: 'Anger',\n    color: 'text-red-600'\n  }, {\n    value: 'sadness',\n    label: 'Sadness',\n    color: 'text-blue-600'\n  }, {\n    value: 'fear',\n    label: 'Fear',\n    color: 'text-purple-600'\n  }, {\n    value: 'disgust',\n    label: 'Disgust',\n    color: 'text-green-600'\n  }, {\n    value: 'surprise',\n    label: 'Surprise',\n    color: 'text-orange-600'\n  }];\n  const abuseTypes = [{\n    value: '',\n    label: 'All Types'\n  }, {\n    value: 'harassment',\n    label: 'Harassment'\n  }, {\n    value: 'bullying',\n    label: 'Bullying'\n  }, {\n    value: 'hate_speech',\n    label: 'Hate Speech'\n  }, {\n    value: 'threats',\n    label: 'Threats'\n  }, {\n    value: 'spam',\n    label: 'Spam'\n  }, {\n    value: 'sexual_content',\n    label: 'Sexual Content'\n  }];\n  useEffect(() => {\n    fetchMessages();\n  }, [selectedChatroom, filters, pagination.page]);\n  useEffect(() => {\n    // Listen for real-time messages\n    if (realTimeData.newMessages.length > 0) {\n      const latestMessage = realTimeData.newMessages[0];\n      if (latestMessage.message.chatroom === selectedChatroom) {\n        setMessages(prev => {\n          const exists = prev.find(msg => msg._id === latestMessage.message._id);\n          if (!exists) {\n            return [latestMessage.message, ...prev];\n          }\n          return prev;\n        });\n        scrollToBottom();\n      }\n    }\n  }, [realTimeData.newMessages, selectedChatroom]);\n  const fetchMessages = async () => {\n    try {\n      setLoading(true);\n      const params = {\n        page: pagination.page,\n        limit: pagination.limit,\n        chatroom: selectedChatroom,\n        ...Object.fromEntries(Object.entries(filters).filter(([key, value]) => value !== ''))\n      };\n      const response = await messagesAPI.getMessages(params);\n      setMessages(response.data.data.messages);\n      setPagination(prev => ({\n        ...prev,\n        ...response.data.data.pagination\n      }));\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n      toast.error('Failed to fetch messages');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const sendMessage = async () => {\n    if (!newMessage.trim() || sending) return;\n    try {\n      setSending(true);\n      await messagesAPI.createMessage({\n        text: newMessage.trim(),\n        chatroom: selectedChatroom\n      });\n      setNewMessage('');\n      toast.success('Message sent!');\n\n      // Refresh messages after a short delay to see the analyzed message\n      setTimeout(() => {\n        fetchMessages();\n      }, 1000);\n    } catch (error) {\n      console.error('Error sending message:', error);\n      toast.error('Failed to send message');\n    } finally {\n      setSending(false);\n    }\n  };\n  const updateMessageStatus = async (messageId, status) => {\n    try {\n      await messagesAPI.updateMessageStatus(messageId, status);\n      toast.success(`Message ${status} successfully`);\n      fetchMessages();\n    } catch (error) {\n      console.error('Error updating message status:', error);\n      toast.error('Failed to update message status');\n    }\n  };\n  const reanalyzeMessage = async messageId => {\n    try {\n      await messagesAPI.reanalyzeMessage(messageId);\n      toast.success('Message re-analyzed successfully');\n      fetchMessages();\n    } catch (error) {\n      console.error('Error re-analyzing message:', error);\n      toast.error('Failed to re-analyze message');\n    }\n  };\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const getEmotionColor = emotion => {\n    const emotionObj = emotions.find(e => e.value === emotion);\n    return (emotionObj === null || emotionObj === void 0 ? void 0 : emotionObj.color) || 'text-gray-600';\n  };\n  const getEmotionIcon = emotion => {\n    switch (emotion) {\n      case 'joy':\n        return 'ðŸ˜Š';\n      case 'anger':\n        return 'ðŸ˜ ';\n      case 'sadness':\n        return 'ðŸ˜¢';\n      case 'fear':\n        return 'ðŸ˜¨';\n      case 'disgust':\n        return 'ðŸ¤¢';\n      case 'surprise':\n        return 'ðŸ˜²';\n      default:\n        return 'ðŸ˜';\n    }\n  };\n  const getAbuseTypeColor = type => {\n    switch (type) {\n      case 'harassment':\n        return 'bg-red-100 text-red-800';\n      case 'bullying':\n        return 'bg-orange-100 text-orange-800';\n      case 'hate_speech':\n        return 'bg-red-200 text-red-900';\n      case 'threats':\n        return 'bg-red-300 text-red-900';\n      case 'spam':\n        return 'bg-gray-100 text-gray-800';\n      case 'sexual_content':\n        return 'bg-pink-100 text-pink-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-gray-900 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(ChatBubbleLeftRightIcon, {\n            className: \"h-8 w-8 mr-3 text-primary-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), \"Messages\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Real-time chat monitoring and analysis\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex items-center px-3 py-1 rounded-full text-sm ${connected ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-2 h-2 rounded-full mr-2 ${connected ? 'bg-green-500' : 'bg-red-500'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), connected ? 'Live' : 'Disconnected']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowFilters(!showFilters),\n          className: `btn-secondary ${showFilters ? 'bg-primary-100 text-primary-700' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(FunnelIcon, {\n            className: \"h-4 w-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), \"Filters\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this), showFilters && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card p-4 space-y-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-5 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Search Messages\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(MagnifyingGlassIcon, {\n              className: \"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: filters.search,\n              onChange: e => setFilters(prev => ({\n                ...prev,\n                search: e.target.value\n              })),\n              placeholder: \"Search messages...\",\n              className: \"input pl-10\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Emotion\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: filters.emotion,\n            onChange: e => setFilters(prev => ({\n              ...prev,\n              emotion: e.target.value\n            })),\n            className: \"input\",\n            children: emotions.map(emotion => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: emotion.value,\n              children: emotion.label\n            }, emotion.value, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Flagged Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: filters.flagged,\n            onChange: e => setFilters(prev => ({\n              ...prev,\n              flagged: e.target.value\n            })),\n            className: \"input\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"All Messages\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"true\",\n              children: \"Flagged Only\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"false\",\n              children: \"Not Flagged\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Abuse Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: filters.abuse_type,\n            onChange: e => setFilters(prev => ({\n              ...prev,\n              abuse_type: e.target.value\n            })),\n            className: \"input\",\n            children: abuseTypes.map(type => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: type.value,\n              children: type.label\n            }, type.value, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setFilters({\n                search: '',\n                emotion: '',\n                flagged: '',\n                abuse_type: '',\n                userId: ''\n              });\n              setPagination(prev => ({\n                ...prev,\n                page: 1\n              }));\n            },\n            className: \"btn-secondary w-full\",\n            children: \"Clear Filters\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-4 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-1\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-gray-900 mb-4\",\n            children: \"Chatrooms\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: chatrooms.map(room => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setSelectedChatroom(room.id),\n              className: `w-full text-left px-3 py-2 rounded-lg transition-colors ${selectedChatroom === room.id ? 'bg-primary-100 text-primary-700 border border-primary-200' : 'hover:bg-gray-100'}`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: room.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `px-2 py-1 text-xs rounded-full ${room.color}`,\n                  children: [\"#\", room.id]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 19\n              }, this)\n            }, room.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-0 h-[600px] flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"font-semibold text-gray-900\",\n                  children: [\"#\", selectedChatroom]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-600\",\n                  children: [messages.length, \" messages \\u2022 \", connected ? 'Live monitoring' : 'Offline']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: fetchMessages,\n                disabled: loading,\n                className: \"btn-secondary\",\n                children: /*#__PURE__*/_jsxDEV(ArrowPathIcon, {\n                  className: `h-4 w-4 ${loading ? 'animate-spin' : ''}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: chatContainerRef,\n            className: \"flex-1 overflow-y-auto p-4 space-y-4\",\n            children: [loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center items-center h-full\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 17\n            }, this) : messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col items-center justify-center h-full text-gray-500\",\n              children: [/*#__PURE__*/_jsxDEV(ChatBubbleLeftRightIcon, {\n                className: \"h-12 w-12 mb-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"No messages found\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: \"Try adjusting your filters or send a message to get started\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 17\n            }, this) : messages.map(message => {\n              var _message$analysis, _message$analysis2;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `flex flex-col space-y-2 p-4 rounded-lg border ${(_message$analysis = message.analysis) !== null && _message$analysis !== void 0 && _message$analysis.abuse_detected ? 'bg-red-50 border-red-200' : message.status === 'flagged' ? 'bg-yellow-50 border-yellow-200' : 'bg-white border-gray-200'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-semibold text-gray-900\",\n                      children: message.username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 412,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm text-gray-500\",\n                      children: new Date(message.createdAt).toLocaleString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 415,\n                      columnNumber: 25\n                    }, this), ((_message$analysis2 = message.analysis) === null || _message$analysis2 === void 0 ? void 0 : _message$analysis2.abuse_detected) && /*#__PURE__*/_jsxDEV(ExclamationTriangleIcon, {\n                      className: \"h-4 w-4 text-red-500\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 419,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 411,\n                    columnNumber: 23\n                  }, this), (user.role === 'moderator' || user.role === 'admin') && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => updateMessageStatus(message._id, 'hidden'),\n                      className: \"text-gray-400 hover:text-gray-600\",\n                      title: \"Hide message\",\n                      children: /*#__PURE__*/_jsxDEV(EyeSlashIcon, {\n                        className: \"h-4 w-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 430,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 425,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => updateMessageStatus(message._id, 'deleted'),\n                      className: \"text-gray-400 hover:text-red-600\",\n                      title: \"Delete message\",\n                      children: /*#__PURE__*/_jsxDEV(TrashIcon, {\n                        className: \"h-4 w-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 437,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 432,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => reanalyzeMessage(message._id),\n                      className: \"text-gray-400 hover:text-blue-600\",\n                      title: \"Re-analyze message\",\n                      children: /*#__PURE__*/_jsxDEV(ArrowPathIcon, {\n                        className: \"h-4 w-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 444,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 439,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 424,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-gray-900\",\n                  children: message.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 21\n                }, this), message.analysis && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-wrap gap-2\",\n                  children: [message.analysis.emotion && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `inline-flex items-center px-2 py-1 text-xs rounded-full bg-gray-100 ${getEmotionColor(message.analysis.emotion)}`,\n                    children: [/*#__PURE__*/_jsxDEV(FaceSmileIcon, {\n                      className: \"h-3 w-3 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 460,\n                      columnNumber: 29\n                    }, this), getEmotionIcon(message.analysis.emotion), \" \", message.analysis.emotion, message.analysis.emotion_intensity > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"ml-1\",\n                      children: [\"(\", message.analysis.emotion_intensity, \"%)\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 463,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 459,\n                    columnNumber: 27\n                  }, this), message.analysis.abuse_detected && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `inline-flex items-center px-2 py-1 text-xs rounded-full ${getAbuseTypeColor(message.analysis.abuse_type)}`,\n                    children: [/*#__PURE__*/_jsxDEV(ShieldExclamationIcon, {\n                      className: \"h-3 w-3 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 470,\n                      columnNumber: 29\n                    }, this), message.analysis.abuse_type, \" (\", message.analysis.confidence_score, \"%)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `inline-flex items-center px-2 py-1 text-xs rounded-full ${message.status === 'active' ? 'bg-green-100 text-green-800' : message.status === 'flagged' ? 'bg-yellow-100 text-yellow-800' : message.status === 'hidden' ? 'bg-gray-100 text-gray-800' : 'bg-red-100 text-red-800'}`,\n                    children: message.status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 475,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 23\n                }, this)]\n              }, message._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 19\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: newMessage,\n                  onChange: e => setNewMessage(e.target.value),\n                  onKeyPress: e => e.key === 'Enter' && sendMessage(),\n                  placeholder: `Send a message to #${selectedChatroom}...`,\n                  className: \"input\",\n                  disabled: sending\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 495,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 494,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: sendMessage,\n                disabled: !newMessage.trim() || sending,\n                className: \"btn-primary\",\n                children: sending ? /*#__PURE__*/_jsxDEV(ArrowPathIcon, {\n                  className: \"h-5 w-5 animate-spin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 511,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(PaperAirplaneIcon, {\n                  className: \"h-5 w-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 513,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }, this), pagination.pages > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-700\",\n        children: [\"Showing \", Math.min(pagination.limit, pagination.total), \" of \", pagination.total, \" messages\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setPagination(prev => ({\n            ...prev,\n            page: prev.page - 1\n          })),\n          disabled: pagination.page === 1,\n          className: \"btn-secondary disabled:opacity-50\",\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"px-3 py-1 text-sm text-gray-700\",\n          children: [\"Page \", pagination.page, \" of \", pagination.pages]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setPagination(prev => ({\n            ...prev,\n            page: prev.page + 1\n          })),\n          disabled: pagination.page === pagination.pages,\n          className: \"btn-secondary disabled:opacity-50\",\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 209,\n    columnNumber: 5\n  }, this);\n};\n_s(Messages, \"c7TUH0lH1jD3H26FBAZkjkN1JFU=\", false, function () {\n  return [useAuth, useSocket];\n});\n_c = Messages;\nexport default Messages;\nvar _c;\n$RefreshReg$(_c, \"Messages\");","map":{"version":3,"names":["React","useState","useEffect","useRef","messagesAPI","usersAPI","useSocket","useAuth","ChatBubbleLeftRightIcon","MagnifyingGlassIcon","FunnelIcon","ExclamationTriangleIcon","EyeSlashIcon","TrashIcon","ArrowPathIcon","PaperAirplaneIcon","FaceSmileIcon","ShieldExclamationIcon","UserGroupIcon","UserIcon","PlusIcon","toast","jsxDEV","_jsxDEV","Messages","_s","user","socket","connected","realTimeData","messages","setMessages","users","setUsers","onlineUsers","setOnlineUsers","loading","setLoading","usersLoading","setUsersLoading","sending","setSending","newMessage","setNewMessage","selectedChatroom","setSelectedChatroom","selectedUser","setSelectedUser","chatType","setChatType","showUserList","setShowUserList","filters","setFilters","search","emotion","flagged","abuse_type","userId","pagination","setPagination","page","limit","total","pages","showFilters","setShowFilters","messagesEndRef","chatContainerRef","chatrooms","id","name","color","emotions","value","label","abuseTypes","fetchMessages","newMessages","length","latestMessage","message","chatroom","prev","exists","find","msg","_id","scrollToBottom","params","Object","fromEntries","entries","filter","key","response","getMessages","data","error","console","sendMessage","trim","createMessage","text","success","setTimeout","updateMessageStatus","messageId","status","reanalyzeMessage","_messagesEndRef$curre","current","scrollIntoView","behavior","getEmotionColor","emotionObj","e","getEmotionIcon","getAbuseTypeColor","type","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onChange","target","placeholder","map","room","disabled","ref","_message$analysis","_message$analysis2","analysis","abuse_detected","username","Date","createdAt","toLocaleString","role","title","emotion_intensity","confidence_score","onKeyPress","Math","min","_c","$RefreshReg$"],"sources":["D:/documents/Desktop/safe- chat-AI/frontend/src/pages/Messages.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { messagesAPI, usersAPI } from '../services/api';\r\nimport { useSocket } from '../services/SocketContext';\r\nimport { useAuth } from '../services/AuthContext';\r\nimport {\r\n  ChatBubbleLeftRightIcon,\r\n  MagnifyingGlassIcon,\r\n  FunnelIcon,\r\n  ExclamationTriangleIcon,\r\n  EyeSlashIcon,\r\n  TrashIcon,\r\n  ArrowPathIcon,\r\n  PaperAirplaneIcon,\r\n  FaceSmileIcon,\r\n  ShieldExclamationIcon,\r\n  UserGroupIcon,\r\n  UserIcon,\r\n  PlusIcon\r\n} from '@heroicons/react/24/outline';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst Messages = () => {\r\n  const { user } = useAuth();\r\n  const { socket, connected, realTimeData } = useSocket();\r\n  const [messages, setMessages] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [onlineUsers, setOnlineUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [usersLoading, setUsersLoading] = useState(false);\r\n  const [sending, setSending] = useState(false);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [selectedChatroom, setSelectedChatroom] = useState('general');\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [chatType, setChatType] = useState('public'); // 'public' or 'private'\r\n  const [showUserList, setShowUserList] = useState(false);\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    emotion: '',\r\n    flagged: '',\r\n    abuse_type: '',\r\n    userId: ''\r\n  });\r\n  const [pagination, setPagination] = useState({\r\n    page: 1,\r\n    limit: 50,\r\n    total: 0,\r\n    pages: 1\r\n  });\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n  const chatContainerRef = useRef(null);\r\n\r\n  const chatrooms = [\r\n    { id: 'general', name: 'General', color: 'bg-blue-100 text-blue-800' },\r\n    { id: 'support', name: 'Support', color: 'bg-green-100 text-green-800' },\r\n    { id: 'feedback', name: 'Feedback', color: 'bg-purple-100 text-purple-800' },\r\n    { id: 'announcements', name: 'Announcements', color: 'bg-yellow-100 text-yellow-800' }\r\n  ];\r\n\r\n  const emotions = [\r\n    { value: '', label: 'All Emotions' },\r\n    { value: 'neutral', label: 'Neutral', color: 'text-gray-600' },\r\n    { value: 'joy', label: 'Joy', color: 'text-yellow-600' },\r\n    { value: 'anger', label: 'Anger', color: 'text-red-600' },\r\n    { value: 'sadness', label: 'Sadness', color: 'text-blue-600' },\r\n    { value: 'fear', label: 'Fear', color: 'text-purple-600' },\r\n    { value: 'disgust', label: 'Disgust', color: 'text-green-600' },\r\n    { value: 'surprise', label: 'Surprise', color: 'text-orange-600' }\r\n  ];\r\n\r\n  const abuseTypes = [\r\n    { value: '', label: 'All Types' },\r\n    { value: 'harassment', label: 'Harassment' },\r\n    { value: 'bullying', label: 'Bullying' },\r\n    { value: 'hate_speech', label: 'Hate Speech' },\r\n    { value: 'threats', label: 'Threats' },\r\n    { value: 'spam', label: 'Spam' },\r\n    { value: 'sexual_content', label: 'Sexual Content' }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    fetchMessages();\r\n  }, [selectedChatroom, filters, pagination.page]);\r\n\r\n  useEffect(() => {\r\n    // Listen for real-time messages\r\n    if (realTimeData.newMessages.length > 0) {\r\n      const latestMessage = realTimeData.newMessages[0];\r\n      if (latestMessage.message.chatroom === selectedChatroom) {\r\n        setMessages(prev => {\r\n          const exists = prev.find(msg => msg._id === latestMessage.message._id);\r\n          if (!exists) {\r\n            return [latestMessage.message, ...prev];\r\n          }\r\n          return prev;\r\n        });\r\n        scrollToBottom();\r\n      }\r\n    }\r\n  }, [realTimeData.newMessages, selectedChatroom]);\r\n\r\n  const fetchMessages = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const params = {\r\n        page: pagination.page,\r\n        limit: pagination.limit,\r\n        chatroom: selectedChatroom,\r\n        ...Object.fromEntries(\r\n          Object.entries(filters).filter(([key, value]) => value !== '')\r\n        )\r\n      };\r\n\r\n      const response = await messagesAPI.getMessages(params);\r\n      setMessages(response.data.data.messages);\r\n      setPagination(prev => ({\r\n        ...prev,\r\n        ...response.data.data.pagination\r\n      }));\r\n    } catch (error) {\r\n      console.error('Error fetching messages:', error);\r\n      toast.error('Failed to fetch messages');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const sendMessage = async () => {\r\n    if (!newMessage.trim() || sending) return;\r\n\r\n    try {\r\n      setSending(true);\r\n      await messagesAPI.createMessage({\r\n        text: newMessage.trim(),\r\n        chatroom: selectedChatroom\r\n      });\r\n      \r\n      setNewMessage('');\r\n      toast.success('Message sent!');\r\n      \r\n      // Refresh messages after a short delay to see the analyzed message\r\n      setTimeout(() => {\r\n        fetchMessages();\r\n      }, 1000);\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      toast.error('Failed to send message');\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  const updateMessageStatus = async (messageId, status) => {\r\n    try {\r\n      await messagesAPI.updateMessageStatus(messageId, status);\r\n      toast.success(`Message ${status} successfully`);\r\n      fetchMessages();\r\n    } catch (error) {\r\n      console.error('Error updating message status:', error);\r\n      toast.error('Failed to update message status');\r\n    }\r\n  };\r\n\r\n  const reanalyzeMessage = async (messageId) => {\r\n    try {\r\n      await messagesAPI.reanalyzeMessage(messageId);\r\n      toast.success('Message re-analyzed successfully');\r\n      fetchMessages();\r\n    } catch (error) {\r\n      console.error('Error re-analyzing message:', error);\r\n      toast.error('Failed to re-analyze message');\r\n    }\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  const getEmotionColor = (emotion) => {\r\n    const emotionObj = emotions.find(e => e.value === emotion);\r\n    return emotionObj?.color || 'text-gray-600';\r\n  };\r\n\r\n  const getEmotionIcon = (emotion) => {\r\n    switch (emotion) {\r\n      case 'joy': return 'ðŸ˜Š';\r\n      case 'anger': return 'ðŸ˜ ';\r\n      case 'sadness': return 'ðŸ˜¢';\r\n      case 'fear': return 'ðŸ˜¨';\r\n      case 'disgust': return 'ðŸ¤¢';\r\n      case 'surprise': return 'ðŸ˜²';\r\n      default: return 'ðŸ˜';\r\n    }\r\n  };\r\n\r\n  const getAbuseTypeColor = (type) => {\r\n    switch (type) {\r\n      case 'harassment': return 'bg-red-100 text-red-800';\r\n      case 'bullying': return 'bg-orange-100 text-orange-800';\r\n      case 'hate_speech': return 'bg-red-200 text-red-900';\r\n      case 'threats': return 'bg-red-300 text-red-900';\r\n      case 'spam': return 'bg-gray-100 text-gray-800';\r\n      case 'sexual_content': return 'bg-pink-100 text-pink-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900 flex items-center\">\r\n            <ChatBubbleLeftRightIcon className=\"h-8 w-8 mr-3 text-primary-600\" />\r\n            Messages\r\n          </h1>\r\n          <p className=\"text-gray-600\">Real-time chat monitoring and analysis</p>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className={`flex items-center px-3 py-1 rounded-full text-sm ${\r\n            connected ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\r\n          }`}>\r\n            <div className={`w-2 h-2 rounded-full mr-2 ${\r\n              connected ? 'bg-green-500' : 'bg-red-500'\r\n            }`}></div>\r\n            {connected ? 'Live' : 'Disconnected'}\r\n          </div>\r\n          \r\n          <button\r\n            onClick={() => setShowFilters(!showFilters)}\r\n            className={`btn-secondary ${showFilters ? 'bg-primary-100 text-primary-700' : ''}`}\r\n          >\r\n            <FunnelIcon className=\"h-4 w-4 mr-2\" />\r\n            Filters\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      {showFilters && (\r\n        <div className=\"card p-4 space-y-4\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Search Messages\r\n              </label>\r\n              <div className=\"relative\">\r\n                <MagnifyingGlassIcon className=\"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n                <input\r\n                  type=\"text\"\r\n                  value={filters.search}\r\n                  onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\r\n                  placeholder=\"Search messages...\"\r\n                  className=\"input pl-10\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Emotion\r\n              </label>\r\n              <select\r\n                value={filters.emotion}\r\n                onChange={(e) => setFilters(prev => ({ ...prev, emotion: e.target.value }))}\r\n                className=\"input\"\r\n              >\r\n                {emotions.map(emotion => (\r\n                  <option key={emotion.value} value={emotion.value}>\r\n                    {emotion.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Flagged Status\r\n              </label>\r\n              <select\r\n                value={filters.flagged}\r\n                onChange={(e) => setFilters(prev => ({ ...prev, flagged: e.target.value }))}\r\n                className=\"input\"\r\n              >\r\n                <option value=\"\">All Messages</option>\r\n                <option value=\"true\">Flagged Only</option>\r\n                <option value=\"false\">Not Flagged</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Abuse Type\r\n              </label>\r\n              <select\r\n                value={filters.abuse_type}\r\n                onChange={(e) => setFilters(prev => ({ ...prev, abuse_type: e.target.value }))}\r\n                className=\"input\"\r\n              >\r\n                {abuseTypes.map(type => (\r\n                  <option key={type.value} value={type.value}>\r\n                    {type.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex items-end\">\r\n              <button\r\n                onClick={() => {\r\n                  setFilters({\r\n                    search: '',\r\n                    emotion: '',\r\n                    flagged: '',\r\n                    abuse_type: '',\r\n                    userId: ''\r\n                  });\r\n                  setPagination(prev => ({ ...prev, page: 1 }));\r\n                }}\r\n                className=\"btn-secondary w-full\"\r\n              >\r\n                Clear Filters\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n        {/* Chatrooms Sidebar */}\r\n        <div className=\"lg:col-span-1\">\r\n          <div className=\"card p-4\">\r\n            <h3 className=\"font-semibold text-gray-900 mb-4\">Chatrooms</h3>\r\n            <div className=\"space-y-2\">\r\n              {chatrooms.map(room => (\r\n                <button\r\n                  key={room.id}\r\n                  onClick={() => setSelectedChatroom(room.id)}\r\n                  className={`w-full text-left px-3 py-2 rounded-lg transition-colors ${\r\n                    selectedChatroom === room.id\r\n                      ? 'bg-primary-100 text-primary-700 border border-primary-200'\r\n                      : 'hover:bg-gray-100'\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"font-medium\">{room.name}</span>\r\n                    <span className={`px-2 py-1 text-xs rounded-full ${room.color}`}>\r\n                      #{room.id}\r\n                    </span>\r\n                  </div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Chat Area */}\r\n        <div className=\"lg:col-span-3\">\r\n          <div className=\"card p-0 h-[600px] flex flex-col\">\r\n            {/* Chat Header */}\r\n            <div className=\"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-lg\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-gray-900\">\r\n                    #{selectedChatroom}\r\n                  </h3>\r\n                  <p className=\"text-sm text-gray-600\">\r\n                    {messages.length} messages â€¢ {connected ? 'Live monitoring' : 'Offline'}\r\n                  </p>\r\n                </div>\r\n                <button\r\n                  onClick={fetchMessages}\r\n                  disabled={loading}\r\n                  className=\"btn-secondary\"\r\n                >\r\n                  <ArrowPathIcon className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Messages List */}\r\n            <div\r\n              ref={chatContainerRef}\r\n              className=\"flex-1 overflow-y-auto p-4 space-y-4\"\r\n            >\r\n              {loading ? (\r\n                <div className=\"flex justify-center items-center h-full\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\r\n                </div>\r\n              ) : messages.length === 0 ? (\r\n                <div className=\"flex flex-col items-center justify-center h-full text-gray-500\">\r\n                  <ChatBubbleLeftRightIcon className=\"h-12 w-12 mb-4\" />\r\n                  <p>No messages found</p>\r\n                  <p className=\"text-sm\">Try adjusting your filters or send a message to get started</p>\r\n                </div>\r\n              ) : (\r\n                messages.map((message) => (\r\n                  <div\r\n                    key={message._id}\r\n                    className={`flex flex-col space-y-2 p-4 rounded-lg border ${\r\n                      message.analysis?.abuse_detected\r\n                        ? 'bg-red-50 border-red-200'\r\n                        : message.status === 'flagged'\r\n                        ? 'bg-yellow-50 border-yellow-200'\r\n                        : 'bg-white border-gray-200'\r\n                    }`}\r\n                  >\r\n                    {/* Message Header */}\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <span className=\"font-semibold text-gray-900\">\r\n                          {message.username}\r\n                        </span>\r\n                        <span className=\"text-sm text-gray-500\">\r\n                          {new Date(message.createdAt).toLocaleString()}\r\n                        </span>\r\n                        {message.analysis?.abuse_detected && (\r\n                          <ExclamationTriangleIcon className=\"h-4 w-4 text-red-500\" />\r\n                        )}\r\n                      </div>\r\n                      \r\n                      {(user.role === 'moderator' || user.role === 'admin') && (\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <button\r\n                            onClick={() => updateMessageStatus(message._id, 'hidden')}\r\n                            className=\"text-gray-400 hover:text-gray-600\"\r\n                            title=\"Hide message\"\r\n                          >\r\n                            <EyeSlashIcon className=\"h-4 w-4\" />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => updateMessageStatus(message._id, 'deleted')}\r\n                            className=\"text-gray-400 hover:text-red-600\"\r\n                            title=\"Delete message\"\r\n                          >\r\n                            <TrashIcon className=\"h-4 w-4\" />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => reanalyzeMessage(message._id)}\r\n                            className=\"text-gray-400 hover:text-blue-600\"\r\n                            title=\"Re-analyze message\"\r\n                          >\r\n                            <ArrowPathIcon className=\"h-4 w-4\" />\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Message Content */}\r\n                    <div className=\"text-gray-900\">\r\n                      {message.text}\r\n                    </div>\r\n\r\n                    {/* Analysis Tags */}\r\n                    {message.analysis && (\r\n                      <div className=\"flex flex-wrap gap-2\">\r\n                        {message.analysis.emotion && (\r\n                          <span className={`inline-flex items-center px-2 py-1 text-xs rounded-full bg-gray-100 ${getEmotionColor(message.analysis.emotion)}`}>\r\n                            <FaceSmileIcon className=\"h-3 w-3 mr-1\" />\r\n                            {getEmotionIcon(message.analysis.emotion)} {message.analysis.emotion}\r\n                            {message.analysis.emotion_intensity > 0 && (\r\n                              <span className=\"ml-1\">({message.analysis.emotion_intensity}%)</span>\r\n                            )}\r\n                          </span>\r\n                        )}\r\n                        \r\n                        {message.analysis.abuse_detected && (\r\n                          <span className={`inline-flex items-center px-2 py-1 text-xs rounded-full ${getAbuseTypeColor(message.analysis.abuse_type)}`}>\r\n                            <ShieldExclamationIcon className=\"h-3 w-3 mr-1\" />\r\n                            {message.analysis.abuse_type} ({message.analysis.confidence_score}%)\r\n                          </span>\r\n                        )}\r\n                        \r\n                        <span className={`inline-flex items-center px-2 py-1 text-xs rounded-full ${\r\n                          message.status === 'active' ? 'bg-green-100 text-green-800' :\r\n                          message.status === 'flagged' ? 'bg-yellow-100 text-yellow-800' :\r\n                          message.status === 'hidden' ? 'bg-gray-100 text-gray-800' :\r\n                          'bg-red-100 text-red-800'\r\n                        }`}>\r\n                          {message.status}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))\r\n              )}\r\n              <div ref={messagesEndRef} />\r\n            </div>\r\n\r\n            {/* Message Input */}\r\n            <div className=\"px-4 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg\">\r\n              <div className=\"flex space-x-3\">\r\n                <div className=\"flex-1\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newMessage}\r\n                    onChange={(e) => setNewMessage(e.target.value)}\r\n                    onKeyPress={(e) => e.key === 'Enter' && sendMessage()}\r\n                    placeholder={`Send a message to #${selectedChatroom}...`}\r\n                    className=\"input\"\r\n                    disabled={sending}\r\n                  />\r\n                </div>\r\n                <button\r\n                  onClick={sendMessage}\r\n                  disabled={!newMessage.trim() || sending}\r\n                  className=\"btn-primary\"\r\n                >\r\n                  {sending ? (\r\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                  ) : (\r\n                    <PaperAirplaneIcon className=\"h-5 w-5\" />\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      {pagination.pages > 1 && (\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"text-sm text-gray-700\">\r\n            Showing {Math.min(pagination.limit, pagination.total)} of {pagination.total} messages\r\n          </div>\r\n          <div className=\"flex space-x-2\">\r\n            <button\r\n              onClick={() => setPagination(prev => ({ ...prev, page: prev.page - 1 }))}\r\n              disabled={pagination.page === 1}\r\n              className=\"btn-secondary disabled:opacity-50\"\r\n            >\r\n              Previous\r\n            </button>\r\n            <span className=\"px-3 py-1 text-sm text-gray-700\">\r\n              Page {pagination.page} of {pagination.pages}\r\n            </span>\r\n            <button\r\n              onClick={() => setPagination(prev => ({ ...prev, page: prev.page + 1 }))}\r\n              disabled={pagination.page === pagination.pages}\r\n              className=\"btn-secondary disabled:opacity-50\"\r\n            >\r\n              Next\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Messages;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}